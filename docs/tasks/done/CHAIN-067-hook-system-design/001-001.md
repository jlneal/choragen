# Task: Extend TransitionAction types for new hook actions

**Chain**: CHAIN-067-hook-system-design  
**Task**: 001-001  
**Status**: done  
**Type**: impl  
**Created**: 2025-12-13

---

## Objective

Extend the `TransitionAction` type in `@choragen/core` to support the three new hook action types: `spawn_agent`, `post_message`, and `emit_event`. This is the foundational type work that enables the subsequent implementation tasks.

---

## Expected Files

- `packages/core/src/workflow/types.ts` — Add new action type definitions
- `packages/core/src/workflow/__tests__/types.test.ts` — Type validation tests (if applicable)

---

## Acceptance Criteria

- [x] `TransitionAction.type` includes `"spawn_agent"`, `"post_message"`, `"emit_event"`
- [x] `SpawnAgentAction` type with `role`, `context` properties
- [x] `PostMessageAction` type with `target`, `content`, `metadata` properties
- [x] `EmitEventAction` type with `eventType`, `payload` properties
- [x] All types exported from `@choragen/core`
- [x] `pnpm build` passes
- [x] `pnpm --filter @choragen/core typecheck` passes

---

## Notes

**Completed 2025-12-12**: Types implemented with explicit interfaces and discriminated union. Template parsing/validation and formatting also updated to support new action types.

---

## Task Type Reference

- **impl** (default): Requires handoff to implementation agent in a fresh session
- **control**: Control agent executes directly (e.g., verification, review, closure tasks)
