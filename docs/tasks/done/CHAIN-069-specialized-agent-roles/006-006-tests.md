# Task: Add tests for role model config resolution

**Chain**: CHAIN-069-specialized-agent-roles  
**Task**: 006-006-tests  
**Status**: done  
**Type**: impl  
**Created**: 2025-12-13

---

## Objective

Add comprehensive tests for role model configuration resolution across core and CLI packages.

---

## Expected Files

- `packages/core/src/roles/__tests__/manager.test.ts — RoleManager tests for model config`
- `packages/cli/src/runtime/__tests__/loop.test.ts — Runtime model resolution tests`
- `packages/cli/src/runtime/__tests__/prompt-loader.test.ts — System prompt loading tests`

---

## File Scope

- `packages/core/src/roles/__tests__/**`
- `packages/cli/src/runtime/__tests__/**`

---

## Acceptance Criteria

- [ ] Test: RoleManager.get() returns model config when present in YAML
- [ ] Test: RoleManager.get() returns undefined model config when not present
- [ ] Test: Role with model config overrides provider defaults
- [ ] Test: Role without model config uses provider defaults
- [ ] Test: Temperature is correctly passed to provider
- [ ] Test: System prompt from role is used when present
- [ ] Test: Fallback to default prompt when role has no systemPrompt
- [ ] Test: Invalid temperature (< 0 or > 1) is rejected
- [ ] All tests pass: pnpm test

---

## Notes

This task should be done after tasks 001-004 are complete. Tests should cover both the happy path and edge cases (missing config, invalid values, etc.).

---

## Task Type Reference

- **impl** (default): Requires handoff to implementation agent in a fresh session
- **control**: Control agent executes directly (e.g., verification, review, closure tasks)
