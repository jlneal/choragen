# Task: Add tests for request CRUD operations

**Chain**: CHAIN-053-request-management  
**Task**: 009-009-tests  
**Status**: todo  
**Type**: impl  
**Created**: 2025-12-10

---

## Objective

Add comprehensive tests for all new request CRUD tRPC procedures.

---

## Expected Files

- `packages/web/src/__tests__/routers/requests-crud.test.ts` (create)

---

## Acceptance Criteria

- [ ] Test `requests.create` with valid CR input
- [ ] Test `requests.create` with valid FR input (includes severity)
- [ ] Test `requests.create` generates unique IDs
- [ ] Test `requests.update` modifies correct fields
- [ ] Test `requests.update` preserves unmodified content
- [ ] Test `requests.close` adds completion notes
- [ ] Test `requests.close` moves file to done/
- [ ] Test `requests.close` rejects non-doing requests
- [ ] Test `requests.delete` removes file
- [ ] Test error cases (not found, invalid input)
- [ ] All tests use temp directories, clean up after

---

## Notes

Follow existing test patterns in `packages/web/src/__tests__/routers/`. Use `HttpStatus` enum from `@choragen/contracts` for status code assertions.

---

## Task Type Reference

- **impl** (default): Requires handoff to implementation agent in a fresh session
- **control**: Control agent executes directly (e.g., verification, review, closure tasks)
